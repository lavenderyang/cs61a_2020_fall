<!DOCTYPE html>
<!-- saved from url=(0030)https://cs61a.org/hw/sol-hw08/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="Hany Farid, John DeNero">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Homework 8 Solutions _ CS 61A Fall 2020_files/jquery.min.js.download"></script>
    <script src="./Homework 8 Solutions _ CS 61A Fall 2020_files/bootstrap.min.js.download"></script>
    <script src="./Homework 8 Solutions _ CS 61A Fall 2020_files/hl.js.download"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="./Homework 8 Solutions _ CS 61A Fall 2020_files/dark-mode.js.download"></script>
    <link rel="stylesheet" href="./Homework 8 Solutions _ CS 61A Fall 2020_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Homework 8 Solutions _ CS 61A Fall 2020_files/css">
    <link rel="stylesheet" href="./Homework 8 Solutions _ CS 61A Fall 2020_files/style.css">
    <link rel="stylesheet" href="./Homework 8 Solutions _ CS 61A Fall 2020_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="./Homework 8 Solutions _ CS 61A Fall 2020_files/hw.css">


    <title>
Homework 8 Solutions | CS 61A Fall 2020
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="./Homework 8 Solutions _ CS 61A Fall 2020_files/logo.png">
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/sol-hw08/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/instructor.html">Instructors</a></li>
                <li><a href="https://cs61a.org/TAs.html">TAs</a></li>
                <li><a href="https://cs61a.org/tutors.html">Tutors</a></li>
                <!-- <li><a href="/academic-interns.html">Academic Interns</a></li> -->
              </ul>
            </li>
            <li><a href="https://cs61a.org/resources.html">Resources</a></li>
            <li><a href="https://cs61a.org/articles/about.html">Syllabus</a></li>
            <li><a href="https://piazza.com/berkeley/fall2020/cs61a" target="_blank">Piazza</a></li>
            <li><a href="https://denero.org/feedback.html" target="_blank">Feedback</a></li>
<!--             <li><a href="https://edge.edx.org/courses/course-v1:BerkeleyX+CSW61A+2020_SP">EdX</a></li> -->
            <!-- <li><a href="https://scheme.cs61a.org">Scheme</a></li> -->
            <!-- <li><a href="https://sql.cs61a.org">SQL</a></li> -->
            <li><a href="https://code.cs61a.org/">Code</a></li>
            <li><a href="http://tutor.cs61a.org/">Tutor</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9">
    <header>
      <h1>
        
Homework 8 Solutions

        
        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/hw/sol-hw08/hw08.zip" class="label label-outline">hw08.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    
<h2>Solution Files</h2>
<p>You can find the solutions in <a href="https://cs61a.org/hw/sol-hw08/hw08.scm">hw08.scm</a>.</p>

    
<h1 id="scheme-editor">Scheme Editor</h1>



<h2 id="how-to-launch">How to launch</h2>


<p>In your <code>hw08</code> folder you will find a new editor. To run this editor, run <code>python3 editor</code>. This should pop up a window in your browser; if it does not, please navigate to <a href="localhost:31415">localhost:31415</a> and you should see it.</p>

<p>Make sure to run <code>python3 ok</code> in a separate tab or window so that the editor keeps running.</p>


<h2 id="features">Features</h2>


<p>The <code>hw08.scm</code> file should already be open. You can edit this file and then run <code>Run</code> to run the code and get an interactive terminal or <code>Test</code> to run the <code>ok</code> tests.</p>

<p><code>Environments</code> will help you diagram your code, and <code>Debug</code> works with environments so you can see where you are in it. We encourage you to try out all these features.</p>

<p><code>Reformat</code> is incredibly useful for determining whether you have parenthesis based bugs in your code. You should be able to see after formatting if your code looks weird where the issue is.</p>

<blockquote><p>By default, the interpreter uses Lisp-style formatting, where the parens are all put on the end of the last line</p>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">f</span> x)
    (<span class="hljs-name"><span class="hljs-keyword">if</span></span> (<span class="hljs-name">&gt;</span> x <span class="hljs-number">0</span>)
        x
        (<span class="hljs-name">-</span> x)))</code></pre>

<p>However, if you would prefer the close parens to be on their own lines as so</p>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">f</span> x)
    (<span class="hljs-name"><span class="hljs-keyword">if</span></span> (<span class="hljs-name">&gt;</span> x <span class="hljs-number">0</span>)
        x
        (<span class="hljs-name">-</span> x)
    )
)</code></pre>

<p>you can go to Settings and select the second option.</p></blockquote>


<h1 id="required-questions">Required Questions</h1>



        <button id="toggle-1" class="btn btn-outline btn-lg alwaystoggle toggle">
        Hint Video<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<h3 id="assignment-hint-video">Assignment Hint Video</h3>

<p>This video provides some helpful direction for tackling problems 3-4 on this assignment.
<br>

            <iframe width="560" height="315" src="./Homework 8 Solutions _ CS 61A Fall 2020_files/t5znmZvON3M.html" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></div><p></p>

<h3 class="question" id="q1">Q1: WWSD: Quasiquote</h3>

<blockquote><p>Use Ok to test your knowledge with the following "What Would Scheme Display?"
questions:</p>

<pre><code class="hljs">python3 ok -q wwsd-quasiquote -u</code></pre></blockquote>



<pre><code class="hljs">scm&gt; '(1 x 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 x 3)</div>
scm&gt; (define x 2)
<div class="alt prompt-1">______</div><div class="solution prompt-1">x</div>
scm&gt; `(1 x 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 x 3)</div>
scm&gt; `(1 ,x 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 2 3)</div>
scm&gt; '(1 ,x 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 (unquote x) 3)</div>
scm&gt; `(,1 x 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 x 3)</div>
scm&gt; `,(+ 1 x 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">6</div>
scm&gt; `(1 (,x) 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 (2) 3)</div>
scm&gt; `(1 ,(+ x 2) 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 4 3)</div>
scm&gt; (define y 3)
<div class="alt prompt-1">______</div><div class="solution prompt-1">y</div>
scm&gt; `(x ,(* y x) y)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(x 6 y)</div>
scm&gt; `(1 ,(cons x (list y 4)) 5)
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 (2 3 4) 5)</div></code></pre>
        <button id="prompt-1" class="btn btn-outline btn-lg solutiontoggle prompt">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
<h3 class="question" id="q2">Q2: WWSD: Eval and Apply</h3>

<blockquote><p>How many calls to <code>scheme_eval</code> and <code>scheme_apply</code> would it take to evaluate each of these
Scheme expressions? Use OkPy to test your knowledge by writing the number of calls needed
to evaluate each expression:</p>

<pre><code class="hljs">python3 ok -q wwsd-eval_apply -u</code></pre></blockquote>



<pre><code class="hljs python">scm&gt; (+ <span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">8</span>) ; number of calls to scheme_eval
<div class="alt prompt-2">______</div><div class="solution prompt-2">6</div>
scm&gt; (+ <span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">8</span>) ; number of calls to scheme_apply
<div class="alt prompt-2">______</div><div class="solution prompt-2">1</div>
scm&gt; (+ <span class="hljs-number">2</span> (* <span class="hljs-number">4</span> (- <span class="hljs-number">6</span> <span class="hljs-number">8</span>))) ; number of calls to scheme_eval
<div class="alt prompt-2">______</div><div class="solution prompt-2">10</div>
scm&gt; (+ <span class="hljs-number">2</span> (* <span class="hljs-number">4</span> (- <span class="hljs-number">6</span> <span class="hljs-number">8</span>))) ; number of calls to scheme_apply
<div class="alt prompt-2">______</div><div class="solution prompt-2">3</div>
scm&gt; (<span class="hljs-keyword">if</span> <span class="hljs-comment">#f (+ 2 3) (+ 1 2)) ; number of calls to scheme_eval</span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">5</div>
scm&gt; (<span class="hljs-keyword">if</span> <span class="hljs-comment">#f (+ 2 3) (+ 1 2)) ; number of calls to scheme_apply</span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">1</div>
scm&gt; (define (cube a) (* a a a)) ; number of calls to scheme_eval
<div class="alt prompt-2">______</div><div class="solution prompt-2">1</div>
scm&gt; (define (cube a) (* a a a)) ; number of calls to scheme_apply
<div class="alt prompt-2">______</div><div class="solution prompt-2">0</div>
scm&gt; (cube <span class="hljs-number">3</span>) ; number of calls to scheme_eval
<div class="alt prompt-2">______</div><div class="solution prompt-2">8</div>
scm&gt; (cube <span class="hljs-number">3</span>) ; number of calls to scheme_apply
<div class="alt prompt-2">______</div><div class="solution prompt-2">2</div></code></pre>
        <button id="prompt-2" class="btn btn-outline btn-lg solutiontoggle prompt">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        


<h2 id="symbolic-differentiation">Symbolic Differentiation</h2>


<!-- code attachment won't work with blocks, it's just dumped at the end -->

<p>The following problems develop a system for
<a href="http://en.wikipedia.org/wiki/Table_of_derivatives#Elementary_rules_of_differentiation">symbolic differentiation</a>
of algebraic expressions.  The <code>derive</code> Scheme procedure takes an
algebraic expression and a variable and returns the derivative of the
expression with respect to the variable. Symbolic differentiation is of
special historical significance in Lisp. It was one of the motivating
examples behind the development of the language. Differentiating is a
recursive process that applies different rules to different kinds of
expressions.</p>

<pre><code class="scheme hljs"><span class="hljs-comment">; derive returns the derivative of EXPR with respect to VAR</span>
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">derive</span> expr var)
  (<span class="hljs-name"><span class="hljs-keyword">cond</span></span> ((<span class="hljs-name">number?</span> expr) <span class="hljs-number">0</span>)
        ((<span class="hljs-name">variable?</span> expr) (<span class="hljs-name"><span class="hljs-keyword">if</span></span> (<span class="hljs-name">same-variable?</span> expr var) <span class="hljs-number">1</span> <span class="hljs-number">0</span>))
        ((<span class="hljs-name">sum?</span> expr) (<span class="hljs-name">derive-sum</span> expr var))
        ((<span class="hljs-name">product?</span> expr) (<span class="hljs-name">derive-product</span> expr var))
        ((<span class="hljs-name">exp?</span> expr) (<span class="hljs-name">derive-exp</span> expr var))
        (<span class="hljs-name">else</span> <span class="hljs-symbol">'Error</span>)))</code></pre>



<p>To implement the system, we will use the following data abstraction.
Sums and products are lists, and they are simplified on construction:</p>

<pre><code class="scheme hljs"><span class="hljs-comment">; Variables are represented as symbols</span>
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">variable?</span> x) (<span class="hljs-name">symbol?</span> x))
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">same-variable?</span> v1 v2)
  (<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">variable?</span> v1) (<span class="hljs-name">variable?</span> v2) (<span class="hljs-name">eq?</span> v1 v2)))

<span class="hljs-comment">; Numbers are compared with =</span>
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">=number?</span> expr num)
  (<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">number?</span> expr) (<span class="hljs-name">=</span> expr num)))

<span class="hljs-comment">; Sums are represented as lists that start with +.</span>
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">make-sum</span> a1 a2)
  (<span class="hljs-name"><span class="hljs-keyword">cond</span></span> ((<span class="hljs-name">=number?</span> a1 <span class="hljs-number">0</span>) a2)
        ((<span class="hljs-name">=number?</span> a2 <span class="hljs-number">0</span>) a1)
        ((<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">number?</span> a1) (<span class="hljs-name">number?</span> a2)) (<span class="hljs-name">+</span> a1 a2))
        (<span class="hljs-name">else</span> (<span class="hljs-name">list</span> <span class="hljs-symbol">'+</span> a1 a2))))
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">sum?</span> x)
  (<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">list?</span> x) (<span class="hljs-name">eq?</span> (<span class="hljs-name">car</span> x) <span class="hljs-symbol">'+</span>)))
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">first-operand</span> s) (<span class="hljs-name">cadr</span> s))
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">second-operand</span> s) (<span class="hljs-name">caddr</span> s))

<span class="hljs-comment">; Products are represented as lists that start with *.</span>
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">make-product</span> m1 m2)
  (<span class="hljs-name"><span class="hljs-keyword">cond</span></span> ((<span class="hljs-name"><span class="hljs-keyword">or</span></span> (<span class="hljs-name">=number?</span> m1 <span class="hljs-number">0</span>) (<span class="hljs-name">=number?</span> m2 <span class="hljs-number">0</span>)) <span class="hljs-number">0</span>)
        ((<span class="hljs-name">=number?</span> m1 <span class="hljs-number">1</span>) m2)
        ((<span class="hljs-name">=number?</span> m2 <span class="hljs-number">1</span>) m1)
        ((<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">number?</span> m1) (<span class="hljs-name">number?</span> m2)) (<span class="hljs-name">*</span> m1 m2))
        (<span class="hljs-name">else</span> (<span class="hljs-name">list</span> <span class="hljs-symbol">'*</span> m1 m2))))
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">product?</span> x)
  (<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">list?</span> x) (<span class="hljs-name">eq?</span> (<span class="hljs-name">car</span> x) <span class="hljs-symbol">'*</span>)))
<span class="hljs-comment">; You can access the operands from the expressions with</span>
<span class="hljs-comment">; first-operand and second-operand</span>
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">first-operand</span> p) (<span class="hljs-name">cadr</span> p))
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">second-operand</span> p) (<span class="hljs-name">caddr</span> p))</code></pre>



<blockquote><p>Note that we will not test whether your solutions to this question correctly
apply the <a href="https://en.wikipedia.org/wiki/Chain_rule">chain rule</a>. For more
info, check out the <a href="https://cs61a.org/hw/sol-hw08/#extensions">extensions</a> section.</p></blockquote>

<h3 class="question" id="q3">Q3: Derive Sum</h3>

<p>Implement <code>derive-sum</code>, a procedure that differentiates a sum by
summing the derivatives of the <code>first-operand</code> and <code>second-operand</code>.  Use data abstraction
for a sum.</p>

<blockquote><p><strong>Note:</strong> the formula for the derivative of a sum is <code>(f(x) + g(x))' = f'(x) + g'(x)</code></p></blockquote>

<pre><code class="scheme hljs">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">derive-sum</span> expr var)
<div class="sol-highlight">  (<span class="hljs-name">make-sum</span> (<span class="hljs-name">derive</span> (<span class="hljs-name">first-operand</span> expr) var)
            (<span class="hljs-name">derive</span> (<span class="hljs-name">second-operand</span> expr) var))</div>)</code></pre>



<p>The tests for this section aren't exhaustive, but tests for later parts will fully test it.</p>

<blockquote><p>Before you start, check your understanding by running</p>

<pre><code class="hljs">python3 ok -q derive-sum -u</code></pre>

<p>To test your code, if you are in the local Scheme editor, hit <code>Test</code>. You can click on a case, press <code>Run</code>, and then use the <code>Debug</code> and <code>Environments</code> features to figure out why your code is not functioning correctly.</p>

<p>You can also test your code from the terminal by running</p>

<pre><code class="hljs">python3 ok -q derive-sum</code></pre></blockquote>

<div class="sol-highlight">

<p>This question is deceptively simple; make sure you understand what the problem is
asking!</p>

<p>To derive a sum of values, we simply <code>derive</code> the first-operand (the thing before the <code>+</code>
in normal math) and the second-operand (the thing after the <code>+</code>).</p>

<p>Then, we have to combine the values again using a sum. In some cases, using the
sum operator will work; in fact, since we've only implemented derivatives of
sums and single variables, we can't do anything too complicated here!</p>

<p>But the correct solution requires the use of <code>make-sum</code> which will helpfully
simplify arithmetic operations and handle symbols. This necessary is for cases
where you have to derive something like the following (after implementing
<code>derive-exp</code>):</p>

<pre><code class="hljs">  scm&gt; (derive (make-sum x^3 x^2) 'x)
  (+ (* 3 (^ x 2)) (* 2 x))</code></pre>

<p>Video walkthrough: <a href="https://youtu.be/mitrrYe0I8U"> https://youtu.be/mitrrYe0I8U </a></p>

</div>

<h3 class="question" id="q4">Q4: Derive Product</h3>

<blockquote><p><strong>Note:</strong> the formula for the derivative of a product is <code>(f(x) g(x))' = f'(x) g(x) + f(x) g'(x)</code></p></blockquote>

<p>Implement <code>derive-product</code>, which applies <a href="http://en.wikipedia.org/wiki/Product_rule">the product
rule</a> to differentiate
products. This means taking the first-operand and second-operand, and then
summing the result of multiplying one by the derivative of the other.</p>

<blockquote><p>The <code>ok</code> tests expect the terms of the result in a particular order.
First, multiply the derivative of the first-operand by the second-operand. Then,
multiply the first-operand by the derivative of the second-operand. Sum these two
terms to form the derivative of the original product.
In other words, <code>f' g + f g'</code>, not some other ordering.</p></blockquote>

<pre><code class="scheme hljs">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">derive-product</span> expr var)
<div class="sol-highlight">  (<span class="hljs-name">make-sum</span>
    (<span class="hljs-name">make-product</span> (<span class="hljs-name">derive</span> (<span class="hljs-name">first-operand</span> expr) var)
                  (<span class="hljs-name">second-operand</span> expr))
    (<span class="hljs-name">make-product</span> (<span class="hljs-name">first-operand</span> expr)
                  (<span class="hljs-name">derive</span> (<span class="hljs-name">second-operand</span> expr) var)))</div>)</code></pre>



<blockquote><p>Before you start, check your understanding by running</p>

<pre><code class="hljs">python3 ok -q derive-product -u</code></pre>

<p>To test your code, if you are in the local Scheme editor, hit <code>Test</code>. You can click on a case, press <code>Run</code>, and then use the <code>Debug</code> and <code>Environments</code> features to figure out why your code is not functioning correctly.</p>

<p>You can also test your code from the terminal by running</p>

<pre><code class="hljs">python3 ok -q derive-product</code></pre></blockquote>

<div class="sol-highlight">

<p>Much like the <code>derive-sum</code>, make sure you understand what the problem is asking.</p>

<p>The main hiccup this time is that the derivative rules are a bit more
complicated for products, and will require using products <strong>and</strong> sums. Just
make sure to use <code>make-sum</code> and <code>make-product</code>, otherwise you may run into
issues further on.</p>

<p>Video walkthrough: <a href="https://youtu.be/yanBT57HgXE"> https://youtu.be/yanBT57HgXE </a></p>

</div>


<h1 id="optional-questions">Optional Questions</h1>


<h3 class="question" id="q5">Q5: Make Exp</h3>

<p>Implement a data abstraction for exponentiation: a <code>base</code> raised to the
power of an <code>exponent</code>. The <code>base</code> can be any expression, but assume that the
<code>exponent</code> is a non-negative integer. You can simplify the cases when
<code>exponent</code> is <code>0</code> or <code>1</code>, or when <code>base</code> is a number, by returning numbers from
the constructor <code>make-exp</code>.  In other cases, you can represent the exp as a
triple <code>(^ base exponent)</code>.</p>

<blockquote><p>You may want to use the built-in procedure <code>expt</code>, which takes two number
arguments and raises the first to the power of the second.</p></blockquote>

<pre><code class="scheme hljs"><span class="hljs-comment">; Exponentiations are represented as lists that start with ^.</span>
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">make-exp</span> base exponent)
<div class="sol-highlight">  (<span class="hljs-name"><span class="hljs-keyword">cond</span></span> ((<span class="hljs-name">=</span> exponent <span class="hljs-number">0</span>) <span class="hljs-number">1</span>)
        ((<span class="hljs-name">=</span> exponent <span class="hljs-number">1</span>) base)
        ((<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">number?</span> base) (<span class="hljs-name">integer?</span> exponent)) (<span class="hljs-name">expt</span> base exponent))
        (<span class="hljs-name">else</span> (<span class="hljs-name">list</span> <span class="hljs-symbol">'^</span> base exponent)))</div>)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">exp?</span> exp)
<div class="sol-highlight">  (<span class="hljs-name"><span class="hljs-keyword">and</span></span> (<span class="hljs-name">list?</span> exp) (<span class="hljs-name">eq?</span> (<span class="hljs-name">car</span> exp) <span class="hljs-symbol">'^</span>))</div>)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> x^2 (<span class="hljs-name">make-exp</span> <span class="hljs-symbol">'x</span> <span class="hljs-number">2</span>))
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> x^3 (<span class="hljs-name">make-exp</span> <span class="hljs-symbol">'x</span> <span class="hljs-number">3</span>))</code></pre>



<blockquote><p>Before you start, check your understanding by running</p>

<pre><code class="hljs">python3 ok -q make-exp -u</code></pre>

<p>To test your code, if you are in the local Scheme editor, hit <code>Test</code>. You can click on a case, press <code>Run</code>, and then use the <code>Debug</code> and <code>Environments</code> features to figure out why your code is not functioning correctly.</p>

<p>You can also test your code from the terminal by running</p>

<pre><code class="hljs">python3 ok -q make-exp</code></pre></blockquote>

<div class="sol-highlight">

<p>It may be helpful to refer to code for <code>make-sum</code> and <code>make-prod</code> to see how
they handle some special cases.</p>

<ul>
  <li>For exponent of 0 or 1, we can return a simplified result.</li>
  <li>If we're doing the exponent of two numbers, we can compute that right away
  using <code>expt</code> instead of creating an exponent abstraction. This is much like
  <code>make-sum</code> and <code>make-prod</code> where we calculate the result using <code>+</code> or <code>*</code>.</li>
  <li>Otherwise, we create the exponent abstraction -- a list of the caret <code>^</code>,
  base, and exponent.</li>
</ul>

<p>Video walkthrough: <a href="https://youtu.be/4E7bOnITEfc"> https://youtu.be/4E7bOnITEfc </a></p>

</div>

<h3 class="question" id="q6">Q6: Derive Exp</h3>

<p>Implement <code>derive-exp</code>, which uses the <a href="http://en.wikipedia.org/wiki/Power_rule">power
rule</a> to derive exponents. Reduce
the power of the exponent by one, and multiply the entire expression by
the original exponent.</p>

<blockquote><p><strong>Note:</strong> the formula for the derivative of an exponent is <code>[f(x)^(g(x))]' = f(x)^(g(x) - 1) * g(x)</code>,
if we ignore the chain rule, which we do for this problem</p></blockquote>

<pre><code class="scheme hljs">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">derive-exp</span> exp var)
<div class="sol-highlight">  (<span class="hljs-name"><span class="hljs-keyword">let</span></span> ((<span class="hljs-name">b</span> (<span class="hljs-name">first-operand</span> exp))
        (<span class="hljs-name">n</span> (<span class="hljs-name">second-operand</span> exp)))
    (<span class="hljs-name"><span class="hljs-keyword">if</span></span> (<span class="hljs-name">number?</span> n)
      (<span class="hljs-name"><span class="hljs-keyword">let</span></span> ((<span class="hljs-name">first</span> (<span class="hljs-name">make-product</span> n (<span class="hljs-name">make-exp</span> b (<span class="hljs-name">-</span> n <span class="hljs-number">1</span>)))))
        (<span class="hljs-name">make-product</span> first (<span class="hljs-name">derive</span> b var))) <span class="hljs-comment">;; Note: Chain rule isn't tested by ok.</span>
        <span class="hljs-symbol">'unknown</span>))</div>)</code></pre>



<blockquote><p>Before you start, check your understanding by running</p>

<pre><code class="hljs">python3 ok -q derive-exp -u</code></pre>

<p>To test your code, if you are in the local Scheme editor, hit <code>Test</code>. You can click on a case, press <code>Run</code>, and then use the <code>Debug</code> and <code>Environments</code> features to figure out why your code is not functioning correctly.</p>

<p>You can also test your code from the terminal by running</p>

<pre><code class="hljs">python3 ok -q derive-exp</code></pre></blockquote>

<div class="sol-highlight">

<p>Applying the power rule here is fairly straightforward -- it's arguably not much
different from <code>derive-sum</code> or <code>derive-prod</code>. The only real differences are that
we're using the power rule and the result will require using <code>make-exp</code> and
<code>make-prod</code>.</p>

<p>Our solution here also implements the chain rule, but it's not necessary to pass
the tests. An implementation that doesn't use the chain rule could just
return:</p>

<pre><code class="hljs scheme">(<span class="hljs-name">make-product</span> n (<span class="hljs-name">make-exp</span> b (<span class="hljs-name">-</span> n <span class="hljs-number">1</span>)))</code></pre>

<p>Video walkthrough: <a href="https://youtu.be/bIM1XrwBMKg"> https://youtu.be/bIM1XrwBMKg </a></p>

</div>


<h3 id="extensions">Extensions</h3>


<p>There are many ways to extend this symbolic differentiation
system. For example, you could simplify nested exponentiation expression such
as <code>(^ (^ x 3) 2)</code>, products of exponents such as <code>(* (^ x 2) (^ x 3))</code>, and
sums of products such as <code>(+ (* 2 x) (* 3 x))</code>. You could apply the <a href="https://en.wikipedia.org/wiki/Chain_rule">chain
rule</a> when deriving exponents, so that
expressions like <code>(derive '(^ (^ x y) 3) 'x)</code> are handled correctly. Enjoy!</p>


<h2 id="submit">Submit</h2>


<p>Make sure to submit this assignment by running:</p>

<pre><code class="hljs sql">python3 ok <span class="hljs-comment">--submit</span></code></pre>

  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/hw/sol-hw08/#scheme-editor">Scheme Editor</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw08/#how-to-launch">How to launch</a></li>
    <li><a href="https://cs61a.org/hw/sol-hw08/#features">Features</a></li>
  </ul>
  <li><a href="https://cs61a.org/hw/sol-hw08/#required-questions">Required Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw08/#assignment-hint-video">Assignment Hint Video</a></li>
    <li><a href="https://cs61a.org/hw/sol-hw08/#q1">Q1: WWSD: Quasiquote</a></li>
    <li><a href="https://cs61a.org/hw/sol-hw08/#q2">Q2: WWSD: Eval and Apply</a></li>
  </ul>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw08/#symbolic-differentiation">Symbolic Differentiation</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/hw/sol-hw08/#q3">Q3: Derive Sum</a></li>
      <li><a href="https://cs61a.org/hw/sol-hw08/#q4">Q4: Derive Product</a></li>
    </ul>
  </ul>
  <li><a href="https://cs61a.org/hw/sol-hw08/#optional-questions">Optional Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw08/#q5">Q5: Make Exp</a></li>
    <li><a href="https://cs61a.org/hw/sol-hw08/#q6">Q6: Derive Exp</a></li>
    <li><a href="https://cs61a.org/hw/sol-hw08/#extensions">Extensions</a></li>
  </ul>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw08/#submit">Submit</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/resources.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/studying.html">Studying Guide</a></li>
            <li><a href="https://cs61a.org/articles/debugging.html">Debugging Guide</a></li>
            <li><a href="https://cs61a.org/articles/composition.html">Composition Guide</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/about.html#assignments">Assignments</a></li>
            <li><a href="https://cs61a.org/articles/about.html#exams">Exams</a></li>
            <li><a href="https://cs61a.org/articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    console.log(target);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      // window.scrollTo(0, 0);
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  
</body></html>